(this["webpackJsonpmesto-react"]=this["webpackJsonpmesto-react"]||[]).push([[0],{17:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n(1),o=n.n(c),s=n(8),i=n.n(s),r=(n(7),n(11)),u=n(4),l=n(2);var d=function(){return Object(a.jsx)("header",{className:"header",children:Object(a.jsx)("div",{className:"header__logo"})})},p=o.a.createContext();var j=function(e){var t=e.card,n=e.onCardClick,c=e.onCardLike,s=e.onCardDelete,i=o.a.useContext(p),r=t.owner._id===i._id,u=t.likes.some((function(e){return e._id===i._id})),l="card__trash ".concat(r?"":"card__trash_invisible"),d="card__like ".concat(u?"card__like_active":"");return Object(a.jsxs)("li",{className:"card",children:[Object(a.jsx)("img",{className:"card__photo",src:t.link,alt:t.name,onClick:function(){n(t)}}),Object(a.jsx)("button",{className:l,"aria-label":"trash",onClick:function(){s(t)}}),Object(a.jsxs)("div",{className:"card__info",children:[Object(a.jsx)("h2",{className:"card__title",children:t.name}),Object(a.jsxs)("div",{className:"card__likes",children:[Object(a.jsx)("button",{className:d,"aria-label":"like",onClick:function(){c(t)}}),Object(a.jsx)("p",{className:"card__like-counter",children:t.likes.length})]})]})]})};var _=function(e){var t=e.onEditAvatar,n=e.onEditProfile,c=e.onAddPlace,s=e.onCardClick,i=e.cards,r=e.onCardLike,u=e.onCardDelete,l=o.a.useContext(p);return Object(a.jsxs)("main",{className:"content",children:[Object(a.jsxs)("section",{className:"profile",children:[Object(a.jsxs)("div",{className:"profile__avatar-container",children:[Object(a.jsx)("img",{className:"profile__avatar",src:l.avatar,alt:"\u0410\u0432\u0430\u0442\u0430\u0440"}),Object(a.jsx)("button",{className:"profile__avatar-button",onClick:t})]}),Object(a.jsxs)("div",{className:"profile__info",children:[Object(a.jsxs)("div",{className:"profile__text",children:[Object(a.jsx)("h1",{className:"profile__name",children:l.name}),Object(a.jsx)("button",{className:"profile__edit-button",type:"button","aria-label":"Edit",onClick:n})]}),Object(a.jsx)("p",{className:"profile__description",children:l.about})]}),Object(a.jsx)("button",{className:"profile__add-button",type:"button",onClick:c})]}),Object(a.jsx)("section",{className:"elements",children:Object(a.jsx)("ul",{className:"cards",children:i.map((function(e){return Object(a.jsx)(j,{card:e,onCardClick:s,onCardLike:r,onCardDelete:u},e._id)}))})})]})};var h=function(){var e=(new Date).getFullYear();return Object(a.jsx)("footer",{className:"footer",children:Object(a.jsxs)("p",{className:"footer__copyright",children:["\xa9 ",e," Mesto Russia"]})})};var b=function(e){var t=e.card,n=e.onClose;return Object(a.jsx)("div",{className:"popup popup_scale-photo ".concat(t.isOpen?"popup_opened":""),children:Object(a.jsxs)("div",{className:"popup__photo-container",children:[Object(a.jsx)("button",{className:"popup__close-button popup__close-button_photo",onClick:n,type:"button"}),Object(a.jsx)("img",{className:"popup__photo",src:t.link,alt:t.name}),Object(a.jsx)("h2",{className:"popup__photo-title",children:t.name})]})})};var m=function(e){var t=e.title,n=e.name,c=e.children,o=e.button,s=e.isOpen,i=e.onClose,r=e.onSubmit;return Object(a.jsx)("div",{className:"popup popup_".concat(n," ").concat(s?"popup_opened":""),children:Object(a.jsxs)("div",{className:"popup__container popup__container_".concat(n),children:[Object(a.jsx)("button",{className:"popup__close-button popup__close-button_".concat(n),type:"button",onClick:i}),Object(a.jsxs)("form",{className:"popup__form popup__form_".concat(n),onSubmit:r,noValidate:!0,children:[Object(a.jsx)("h3",{className:"popup__title popup__title_".concat(n),children:t}),c,Object(a.jsx)("button",{className:"popup__submit",type:"submit",children:o})]})]})})};var f=function(e){var t=e.isOpen,n=e.onClose,c=e.onUpdateUser,s=o.a.useContext(p),i=o.a.useState(s.name),r=Object(l.a)(i,2),u=r[0],d=r[1],j=o.a.useState(s.about),_=Object(l.a)(j,2),h=_[0],b=_[1],f=o.a.useState(!1),O=Object(l.a)(f,2),v=O[0],x=O[1];return o.a.useEffect((function(){d(s.name),b(s.about)}),[s]),Object(a.jsxs)(m,{name:"edit",title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u0440\u043e\u0444\u0438\u043b\u044c",isOpen:t,onClose:n,onSubmit:function(e){e.preventDefault(),x(!0),c({name:u,about:h})},button:v?"\u0421\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435...":"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",children:[Object(a.jsx)("input",{className:"popup__input popup__input_name",placeholder:"\u0418\u043c\u044f",type:"text",name:"name",value:u||"",onChange:function(e){d(e.target.value)},id:"name-field",minLength:"2",maxLength:"40",required:!0}),Object(a.jsx)("span",{className:"popup__error_visible",id:"name-field-error"}),Object(a.jsx)("input",{className:"popup__input popup__input_description",placeholder:"\u0420\u043e\u0434 \u0437\u0430\u043d\u044f\u0442\u0438\u0439",type:"text",name:"about",value:h||"",onChange:function(e){b(e.target.value)},id:"description-field",minLength:"2",maxLength:"200",required:!0}),Object(a.jsx)("span",{className:"popup__error_visible",id:"description-field-error"})]})};var O=function(e){var t=e.isOpen,n=e.onClose,c=e.onUpdateAvatar,s=o.a.useRef(),i=o.a.useState(!1),r=Object(l.a)(i,2),u=r[0],d=r[1];return Object(a.jsxs)(m,{name:"new-avatar",title:"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0430\u0432\u0430\u0442\u0430\u0440",isOpen:t,onClose:n,onSubmit:function(e){e.preventDefault(),d(!0),c({avatar:s.current.value})},button:u?"\u0421\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435...":"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",children:[Object(a.jsx)("input",{className:"popup__input popup__input_avatar",placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443",type:"url",name:"avatar",ref:s,onChange:function(e){s.current.value=e.target.value},id:"link-of-image",required:!0}),Object(a.jsx)("span",{className:"popup__error",id:"link-of-image-error"})]})};var v=function(e){var t=e.isOpen,n=e.onClose,c=e.onAddPlace,s=o.a.useState(""),i=Object(l.a)(s,2),r=i[0],u=i[1],d=o.a.useState(""),p=Object(l.a)(d,2),j=p[0],_=p[1],h=o.a.useState(!1),b=Object(l.a)(h,2),f=b[0],O=b[1];return o.a.useEffect((function(){u(""),_("")}),[t]),Object(a.jsxs)(m,{name:"add",title:"\u041d\u043e\u0432\u043e\u0435 \u043c\u0435\u0441\u0442\u043e",isOpen:t,onClose:n,onSubmit:function(e){e.preventDefault(),O(!0),c({name:r,link:j})},button:f?"\u0421\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435...":"\u0421\u043e\u0437\u0434\u0430\u0442\u044c",children:[Object(a.jsx)("input",{className:"popup__input popup__input_image-title",placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",type:"text",name:"name",value:r,onChange:function(e){u(e.target.value)},id:"image-title",minLength:"2",maxLength:"30",required:!0}),Object(a.jsx)("span",{className:"popup__error",id:"image-title-error"}),Object(a.jsx)("input",{className:"popup__input popup__input_link-of-image",placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443",type:"url",name:"link",value:j,onChange:function(e){_(e.target.value)},id:"link-of-image",required:!0}),Object(a.jsx)("span",{className:"popup__error",id:"link-of-image-error"})]})};var x=function(e){var t=e.isOpen,n=e.onClose,c=e.onDeleteCard,s=o.a.useState(!1),i=Object(l.a)(s,2),r=i[0],u=i[1];return Object(a.jsx)(m,{name:"delete-photo",title:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b?",isOpen:t,onClose:n,onSubmit:function(e){e.preventDefault(),u(!0),c()},button:r?"\u0423\u0434\u0430\u043b\u0435\u043d\u0438\u0435...":"\u0414\u0430"})},C=n(9),g=n(10),k=new(function(){function e(t){Object(C.a)(this,e),this._url=t.url,this._headers=t.headers}return Object(g.a)(e,[{key:"_sendData",value:function(e,t){return fetch("".concat(this._url).concat(e),t).then((function(e){return e.ok?e.json():Promise.reject("\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430: ".concat(e.status))}))}},{key:"getUserInfo",value:function(){return this._sendData("users/me",{method:"GET",headers:this._headers})}},{key:"getCards",value:function(){return this._sendData("cards",{method:"GET",headers:this._headers})}},{key:"getStartData",value:function(){return Promise.all([this.getUserInfo(),this.getCards()])}},{key:"changeUserInfo",value:function(e){return this._sendData("users/me",{method:"PATCH",headers:this._headers,body:JSON.stringify({name:e.name,about:e.about})})}},{key:"addCard",value:function(e){return this._sendData("cards",{method:"POST",headers:this._headers,body:JSON.stringify({name:e.name,link:e.link})})}},{key:"changeLikeCardStatus",value:function(e,t){return this._sendData("cards/likes/".concat(e),{method:t?"DELETE":"PUT",headers:this._headers})}},{key:"deleteCard",value:function(e){return this._sendData("cards/".concat(e),{method:"DELETE",headers:this._headers})}},{key:"changeAvatar",value:function(e){return this._sendData("users/me/avatar",{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:e.avatar})})}}]),e}())({url:"https://mesto.nomoreparties.co/v1/cohort-18/",headers:{authorization:"4ce0d8a0-2bf1-4ede-8511-f9af6b75d79f","Content-Type":"application/json"}});var N=function(){var e=o.a.useState(!1),t=Object(l.a)(e,2),n=t[0],c=t[1],s=o.a.useState(!1),i=Object(l.a)(s,2),j=i[0],m=i[1],C=o.a.useState(!1),g=Object(l.a)(C,2),N=g[0],S=g[1],y=o.a.useState(!1),D=Object(l.a)(y,2),E=D[0],L=D[1],P=o.a.useState({link:"",name:"",isOpen:!1}),A=Object(l.a)(P,2),U=A[0],T=A[1],I=o.a.useState({}),w=Object(l.a)(I,2),q=w[0],F=w[1],J=o.a.useState({}),B=Object(l.a)(J,2),G=B[0],H=B[1],M=o.a.useState([]),R=Object(l.a)(M,2),z=R[0],V=R[1];function Y(){S(!1),m(!1),c(!1),L(!1),T({link:"",name:"",isOpen:!1})}return o.a.useEffect((function(){k.getCards().then((function(e){V(e)})).catch((function(e){return console.log("\u0423\u043f\u0441!: ".concat(e))}))}),[]),o.a.useEffect((function(){k.getUserInfo().then((function(e){H(e)})).catch((function(e){return console.log("\u0423\u043f\u0441!: ".concat(e))}))}),[]),Object(a.jsx)(p.Provider,{value:G,children:Object(a.jsxs)("div",{className:"root",children:[Object(a.jsx)(d,{}),Object(a.jsx)(_,{onEditAvatar:function(){c(!n)},onEditProfile:function(){m(!j)},onAddPlace:function(){S(!N)},onCardClick:function(e){T({link:e.link,name:e.name,isOpen:!0})},cards:z,onCardLike:function(e){var t=e.likes.some((function(e){return e._id===G._id}));k.changeLikeCardStatus(e._id,t).then((function(t){var n=z.map((function(n){return n._id===e._id?t:n}));V(n)})).catch((function(e){return console.log("\u0423\u043f\u0441!: ".concat(e))}))},onCardDelete:function(e){L(!E),F(e)}}),Object(a.jsx)(h,{}),Object(a.jsx)(f,{isOpen:j,onClose:Y,onUpdateUser:function(e){k.changeUserInfo(e).then((function(){H(Object(u.a)(Object(u.a)({},G),e)),Y()})).catch((function(e){return console.log("\u0423\u043f\u0441!: ".concat(e))}))}}),Object(a.jsx)(v,{isOpen:N,onClose:Y,onAddPlace:function(e){k.addCard(e).then((function(e){V([e].concat(Object(r.a)(z))),Y()})).catch((function(e){return console.log("\u0423\u043f\u0441!: ".concat(e))}))}}),Object(a.jsx)(b,{card:U,onClose:Y}),Object(a.jsx)(x,{isOpen:E,onClose:Y,onDeleteCard:function(){k.deleteCard(q._id).then((function(){var e=z.filter((function(e){return e._id!==q._id}));V(e),F({}),Y()})).catch((function(e){return console.log("\u0423\u043f\u0441!: ".concat(e))}))}}),Object(a.jsx)(O,{isOpen:n,onClose:Y,onUpdateAvatar:function(e){k.changeAvatar(e).then((function(){H(Object(u.a)(Object(u.a)({},G),e)),Y()})).catch((function(e){return console.log("\u0423\u043f\u0441!: ".concat(e))}))}})]})})},S=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,18)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,o=t.getLCP,s=t.getTTFB;n(e),a(e),c(e),o(e),s(e)}))};i.a.render(Object(a.jsx)(o.a.StrictMode,{children:Object(a.jsx)(N,{})}),document.getElementById("root")),S()},7:function(e,t,n){}},[[17,1,2]]]);
//# sourceMappingURL=main.47095682.chunk.js.map